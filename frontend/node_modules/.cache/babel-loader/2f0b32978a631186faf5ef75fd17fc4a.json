{"remainingRequest":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\wamp64\\www\\requestportal\\frontend\\src\\services\\user.service.js","dependencies":[{"path":"C:\\wamp64\\www\\requestportal\\frontend\\src\\services\\user.service.js","mtime":1558509107373},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\nimport _wrapNativeSuper from \"C:\\\\wamp64\\\\www\\\\requestportal\\\\frontend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/wrapNativeSuper\";\nimport ApiService from './api.service';\nimport { TokenService } from './storage.service';\n\nvar AuthenticationError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(AuthenticationError, _Error);\n\n  function AuthenticationError(errorCode, message) {\n    var _this;\n\n    _classCallCheck(this, AuthenticationError);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthenticationError).call(this, message));\n    _this.name = _this.constructor.name;\n    _this.errorCode = errorCode;\n    _this.message = message;\n    return _this;\n  }\n\n  return AuthenticationError;\n}(_wrapNativeSuper(Error));\n\nvar RegistrationError =\n/*#__PURE__*/\nfunction (_Error2) {\n  _inherits(RegistrationError, _Error2);\n\n  function RegistrationError(errorCode, message) {\n    var _this2;\n\n    _classCallCheck(this, RegistrationError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(RegistrationError).call(this, message));\n    _this2.name = _this2.constructor.name;\n    _this2.errorCode = errorCode;\n    _this2.message = message;\n    return _this2;\n  }\n\n  return RegistrationError;\n}(_wrapNativeSuper(Error));\n\nvar UserService = {\n  /**\r\n    * Login the user and store the access token to TokenService. \r\n    * \r\n    * @returns access_token\r\n    * @throws AuthenticationError \r\n  **/\n  login: function () {\n    var _login = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(employee_number, password) {\n      var requestData, response;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              requestData = {\n                method: 'POST',\n                url: \"/api/login\",\n                data: {\n                  employee_number: employee_number,\n                  password: password\n                }\n              };\n              _context.prev = 1;\n              _context.next = 4;\n              return ApiService.customRequest(requestData);\n\n            case 4:\n              response = _context.sent;\n              TokenService.saveToken(response.data.access_token);\n              ApiService.setHeader(); // NOTE: We haven't covered this yet in our ApiService \n              //       but don't worry about this just yet - I'll come back to it later\n              // ApiService.mount401Interceptor();\n\n              return _context.abrupt(\"return\", response.data);\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              throw new AuthenticationError(_context.t0.response.status, _context.t0.response.data.message);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n\n    function login(_x, _x2) {\n      return _login.apply(this, arguments);\n    }\n\n    return login;\n  }(),\n\n  /**\r\n    * Register the user \r\n    * \r\n    * @returns status\r\n    * @throws RegistrationError \r\n  **/\n  register: function () {\n    var _register = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2(name, username, password) {\n      var requestData, response;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              requestData = {\n                method: 'POST',\n                url: \"/api/register\",\n                data: {\n                  name: name,\n                  username: username,\n                  password: password\n                }\n              };\n              _context2.prev = 1;\n              _context2.next = 4;\n              return ApiService.customRequest(requestData);\n\n            case 4:\n              response = _context2.sent;\n              return _context2.abrupt(\"return\", response.data);\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              throw new RegistrationError(_context2.t0.response.status, _context2.t0.response.data.message);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    function register(_x3, _x4, _x5) {\n      return _register.apply(this, arguments);\n    }\n\n    return register;\n  }(),\n\n  /**\r\n   * Logout the current user by removing the token from storage. \r\n   * \r\n   * Will also remove `Authorization Bearer <token>` header from future requests.\r\n  **/\n  logout: function () {\n    var _logout = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3() {\n      var requestData, response;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              // Remove the token and remove Authorization header from Api Service as well\n              requestData = {\n                method: 'POST',\n                url: \"/api/logout\",\n                data: {\n                  access_token: TokenService.getToken()\n                }\n              };\n              _context3.prev = 1;\n              _context3.next = 4;\n              return ApiService.customRequest(requestData);\n\n            case 4:\n              response = _context3.sent;\n              TokenService.removeToken();\n              ApiService.removeHeader();\n              return _context3.abrupt(\"return\", response.data);\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n              // throw new RegistrationError(error.response.status, error.response.data.message)\n              console.log(_context3.t0);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 10]]);\n    }));\n\n    function logout() {\n      return _logout.apply(this, arguments);\n    }\n\n    return logout;\n  }()\n};\nexport default UserService;\nexport { UserService, AuthenticationError, RegistrationError };",{"version":3,"sources":["C:\\wamp64\\www\\requestportal\\frontend\\src\\services\\user.service.js"],"names":["ApiService","TokenService","AuthenticationError","errorCode","message","name","constructor","Error","RegistrationError","UserService","login","employee_number","password","requestData","method","url","data","customRequest","response","saveToken","access_token","setHeader","status","register","username","logout","getToken","removeToken","removeHeader","console","log"],"mappings":"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","sourcesContent":["import ApiService from './api.service'\r\nimport { TokenService } from './storage.service'\r\n\r\nclass AuthenticationError extends Error {\r\n  constructor(errorCode, message) {\r\n    super(message)\r\n    this.name = this.constructor.name\r\n    this.errorCode = errorCode\r\n    this.message = message\r\n  }\r\n}\r\n\r\nclass RegistrationError extends Error {\r\n  constructor(errorCode, message) {\r\n    super(message)\r\n    this.name = this.constructor.name\r\n    this.errorCode = errorCode\r\n    this.message = message\r\n  }\r\n}\r\n\r\nconst UserService = {\r\n  /**\r\n    * Login the user and store the access token to TokenService. \r\n    * \r\n    * @returns access_token\r\n    * @throws AuthenticationError \r\n  **/\r\n  login: async function(employee_number, password) {\r\n    const requestData = {\r\n      method: 'POST',\r\n      url: \"/api/login\",\r\n      data: {\r\n        employee_number: employee_number,\r\n        password: password\r\n      }\r\n    }\r\n\r\n    try {\r\n      const response = await ApiService.customRequest(requestData)\r\n      \r\n      TokenService.saveToken(response.data.access_token)\r\n      ApiService.setHeader()\r\n      \r\n      // NOTE: We haven't covered this yet in our ApiService \r\n      //       but don't worry about this just yet - I'll come back to it later\r\n      // ApiService.mount401Interceptor();\r\n\r\n      return response.data\r\n    } \r\n    catch (error) {\r\n      throw new AuthenticationError(error.response.status, error.response.data.message)\r\n    }\r\n  },\r\n\r\n  /**\r\n    * Register the user \r\n    * \r\n    * @returns status\r\n    * @throws RegistrationError \r\n  **/\r\n  register: async (name, username, password) => {\r\n    const requestData = {\r\n      method: 'POST',\r\n      url: \"/api/register\",\r\n      data: {\r\n        name: name,\r\n        username: username,\r\n        password: password\r\n      }\r\n    }\r\n    \r\n    try {\r\n      const response = await ApiService.customRequest(requestData)\r\n\r\n      return response.data\r\n    } \r\n    catch (error) {\r\n      throw new RegistrationError(error.response.status, error.response.data.message)\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Logout the current user by removing the token from storage. \r\n   * \r\n   * Will also remove `Authorization Bearer <token>` header from future requests.\r\n  **/\r\n  async logout() {\r\n    // Remove the token and remove Authorization header from Api Service as well\r\n    const requestData = {\r\n      method: 'POST',\r\n      url: \"/api/logout\",\r\n      data: {\r\n        access_token: TokenService.getToken()\r\n      }\r\n    }\r\n\r\n    try {\r\n      const response = await ApiService.customRequest(requestData)\r\n\r\n      TokenService.removeToken()\r\n      ApiService.removeHeader()\r\n\r\n      return response.data\r\n      \r\n      // NOTE: Again, we'll cover the 401 Interceptor a bit later. \r\n      // ApiService.unmount401Interceptor()\r\n    } \r\n    catch (error) {\r\n      // throw new RegistrationError(error.response.status, error.response.data.message)\r\n      console.log(error)\r\n    }\r\n  }\r\n}\r\n\r\nexport default UserService\r\n\r\nexport { UserService, AuthenticationError, RegistrationError }\r\n"]}]}