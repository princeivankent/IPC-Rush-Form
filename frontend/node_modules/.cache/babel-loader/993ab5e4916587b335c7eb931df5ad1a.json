{"remainingRequest":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\wamp64\\www\\requestportal\\frontend\\src\\router.js","dependencies":[{"path":"C:\\wamp64\\www\\requestportal\\frontend\\src\\router.js","mtime":1558511906235},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\requestportal\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es7.promise.finally\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport { TokenService } from './services/storage.service';\n\nvar Main = function Main() {\n  return import(\n  /* webpackChunkName: \"main\" */\n  './layouts/Main');\n};\n\nvar Login = function Login() {\n  return import(\n  /* webpackChunkName: \"login\" */\n  './views/auth/Login');\n};\n\nvar Register = function Register() {\n  return import(\n  /* webpackChunkName: \"register\" */\n  './views/auth/Register');\n};\n\nvar Home = function Home() {\n  return import(\n  /* webpackChunkName: \"home\" */\n  './views/Home');\n};\n\nVue.use(VueRouter);\nvar router = new VueRouter({\n  mode: 'history',\n  base: 'requestportal',\n  routes: [{\n    path: '*',\n    redirect: '/home'\n  }, {\n    path: '/',\n    redirect: '/home'\n  }, {\n    path: '/',\n    component: Main,\n    meta: {\n      requiresAuth: true\n    },\n    children: [{\n      path: 'home',\n      component: Home\n    }]\n  }, {\n    path: '/login',\n    component: Login,\n    meta: {\n      forVisitors: true\n    }\n  }, {\n    path: '/register',\n    component: Register,\n    meta: {\n      forVisitors: true\n    }\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  var forVisitors = to.matched.some(function (record) {\n    return record.meta.forVisitors;\n  });\n  var requiresAuth = to.matched.some(function (record) {\n    return record.meta.requiresAuth;\n  });\n  var loggedIn = !!TokenService.getToken();\n\n  if (forVisitors) {\n    if (loggedIn) return;else next();\n  } else if (requiresAuth) {\n    if (!loggedIn) next('/login');else next();\n  }\n});\nexport default router;",{"version":3,"sources":["C:\\wamp64\\www\\requestportal\\frontend\\src\\router.js"],"names":["Vue","VueRouter","TokenService","Main","Login","Register","Home","use","router","mode","base","routes","path","redirect","component","meta","requiresAuth","children","forVisitors","beforeEach","to","from","next","matched","some","record","loggedIn","getToken"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,YAAT,QAA6B,4BAA7B;;AAEA,IAAMC,IAAI,GAAO,SAAXA,IAAW;AAAA,SAAM;AAAO;AAA+B,kBAAtC,CAAN;AAAA,CAAjB;;AACA,IAAMC,KAAK,GAAM,SAAXA,KAAW;AAAA,SAAM;AAAO;AAAgC,sBAAvC,CAAN;AAAA,CAAjB;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAM;AAAO;AAAmC,yBAA1C,CAAN;AAAA,CAAjB;;AACA,IAAMC,IAAI,GAAO,SAAXA,IAAW;AAAA,SAAM;AAAO;AAA+B,gBAAtC,CAAN;AAAA,CAAjB;;AAEAN,GAAG,CAACO,GAAJ,CAAQN,SAAR;AAEA,IAAMO,MAAM,GAAG,IAAIP,SAAJ,CAAc;AAC3BQ,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAE,eAFqB;AAG3BC,EAAAA,MAAM,EAAE,CACN;AAAEC,IAAAA,IAAI,EAAE,GAAR;AAAaC,IAAAA,QAAQ,EAAE;AAAvB,GADM,EAEN;AAAED,IAAAA,IAAI,EAAE,GAAR;AAAaC,IAAAA,QAAQ,EAAE;AAAvB,GAFM,EAGN;AACED,IAAAA,IAAI,EAAE,GADR;AAEEE,IAAAA,SAAS,EAAEX,IAFb;AAGEY,IAAAA,IAAI,EAAE;AACJC,MAAAA,YAAY,EAAE;AADV,KAHR;AAMEC,IAAAA,QAAQ,EAAE,CACR;AAAEL,MAAAA,IAAI,EAAE,MAAR;AAAgBE,MAAAA,SAAS,EAAER;AAA3B,KADQ;AANZ,GAHM,EAaN;AACEM,IAAAA,IAAI,EAAE,QADR;AAEEE,IAAAA,SAAS,EAAEV,KAFb;AAGEW,IAAAA,IAAI,EAAE;AACJG,MAAAA,WAAW,EAAE;AADT;AAHR,GAbM,EAoBN;AACEN,IAAAA,IAAI,EAAE,WADR;AAEEE,IAAAA,SAAS,EAAET,QAFb;AAGEU,IAAAA,IAAI,EAAE;AACJG,MAAAA,WAAW,EAAE;AADT;AAHR,GApBM;AAHmB,CAAd,CAAf;AAiCAV,MAAM,CAACW,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAMJ,WAAW,GAAGE,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACV,IAAP,CAAYG,WAAhB;AAAA,GAAtB,CAApB;AACA,MAAMF,YAAY,GAAGI,EAAE,CAACG,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACV,IAAP,CAAYC,YAAhB;AAAA,GAAtB,CAArB;AACA,MAAMU,QAAQ,GAAG,CAAC,CAACxB,YAAY,CAACyB,QAAb,EAAnB;;AAEA,MAAIT,WAAJ,EAAiB;AACf,QAAIQ,QAAJ,EACE,OADF,KAEKJ,IAAI;AACV,GAJD,MAKK,IAAIN,YAAJ,EAAkB;AACrB,QAAI,CAACU,QAAL,EACEJ,IAAI,CAAC,QAAD,CAAJ,CADF,KAEKA,IAAI;AACV;AACF,CAfD;AAiBA,eAAed,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport { TokenService } from './services/storage.service'\r\n\r\nconst Main     = () => import(/* webpackChunkName: \"main\" */ './layouts/Main')\r\nconst Login    = () => import(/* webpackChunkName: \"login\" */ './views/auth/Login')\r\nconst Register = () => import(/* webpackChunkName: \"register\" */ './views/auth/Register')\r\nconst Home     = () => import(/* webpackChunkName: \"home\" */ './views/Home')\r\n\r\nVue.use(VueRouter)\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: 'requestportal',\r\n  routes: [\r\n    { path: '*', redirect: '/home' },\r\n    { path: '/', redirect: '/home'},\r\n    { \r\n      path: '/', \r\n      component: Main,\r\n      meta: { \r\n        requiresAuth: true \r\n      },\r\n      children: [\r\n        { path: 'home', component: Home }\r\n      ]\r\n    },\r\n    { \r\n      path: '/login',\r\n      component: Login,\r\n      meta: { \r\n        forVisitors: true \r\n      }\r\n    },\r\n    {\r\n      path: '/register',\r\n      component: Register,\r\n      meta: {\r\n        forVisitors: true\r\n      }\r\n    }\r\n  ]\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  const forVisitors = to.matched.some(record => record.meta.forVisitors)\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth)\r\n  const loggedIn = !!TokenService.getToken()\r\n\r\n  if (forVisitors) {\r\n    if (loggedIn)\r\n      return\r\n    else next()\r\n  }\r\n  else if (requiresAuth) {\r\n    if (!loggedIn)\r\n      next('/login')\r\n    else next()\r\n  }\r\n})\r\n\r\nexport default router"]}]}